<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>500 brukere</title>
    <!-- Lim inn kode fra firebase her-->
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.9.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.9.1/firebase-firestore.js"></script>
    
    <!-- TODO: Add SDKs for Firebase products that you want to use
         https://firebase.google.com/docs/web/setup#available-libraries -->
    
    <script>
      // Your web app's Firebase configuration
      var firebaseConfig = {
        apiKey: "AIzaSyAEs5feo50-kFdCjN7e-M-AXYrWRtql5fw",
        authDomain: "chat-og-mer-it1-torsdag.firebaseapp.com",
        databaseURL: "https://chat-og-mer-it1-torsdag.firebaseio.com",
        projectId: "chat-og-mer-it1-torsdag",
        storageBucket: "chat-og-mer-it1-torsdag.appspot.com",
        messagingSenderId: "1080712309363",
        appId: "1:1080712309363:web:db7fcfaaddc02d9f6fd806"
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
    </script>

  </head>
  <body>
    <h1>Legg til brukere i databasen din</h1>

    <p>Lim inn kode fra firebase i HTML-fila, og trykk på knappen.</p>

    <button>Legg til 500 brukere</button>
    
    <p id="tekst"></p>

    <script type="text/javascript">
      const knapp = document.querySelector("button");
      const tekst = document.querySelector("#tekst");

      const leggTilBrukere = async () => {
        try{

          const db = firebase.firestore();
          const randompeople = db.collection("randompeople");

          const response = await fetch("https://randomuser.me/api/?results=500");
          const json = await response.json();
          for (const user of json.results) {
            randompeople.doc(user.email).set({
              firstName: user.name.first,
              lastName: user.name.last,
              title: user.name.title,
              age: user.dob.age,
              city: user.location.city,
              country: user.location.country,
              picture: user.picture.large
            })
          }
          tekst.innerHTML = `500 brukere ble lagt inn i databasen din. Sjekk firebase`;
        }
        catch(err){
          tekst.innerHTML = `Noe gikk galt. Har du husket å lime inn kode fra firebase i HTML-filen?`
        }
      }
      
      knapp.onclick = leggTilBrukere;
      
    </script>
  </body>
</html>